---
sidebar:
nav: "main"
layout: single
title:  "멀티 쓰레딩 적용 개발일기"
categories: [Programming,Dev-diary]
tags: [Java,Dev-diary]
teaser: /assets/images/teaser/java.jpeg
---

<p align="center"><img src="/assets/images/teaser/programming.jpeg" width="100%" height="auto"></p>


21년 9월쯤 회사에서 멀티쓰레딩을 적용하여 개발한 업무가 있습니다.\
이번 포스팅은 주니어로써 멀티쓰레딩을 회사에 적용한 경험에 대한 포스팅입니다.\
당시 개발할때 발표한 발표자료와 회사코드에 주석을 작성했던것이 큰 도움이 되었네요.\
(기록의 중요성)


이문제는 왜 싱클턴 -> 
그래서 멀티스레딩 -> 
멀티스레딩은 이런식으로 적용해서 해결 ->
aop프록시 한계회피용으로 async서비스는 왜 만들었는지


해결 해야하는 문제
---
자사서비스에서 동영상를 처리할때 외부 비디오 서비스를 사용하였습니다.\
해당 비디오 서비스API는 영상 등록의 경우 API응답까지 대기시간이 꽤 있었습니다.\
(영상을 InputStream으로 변환 -> InputStream으로 영상 등록 API호출 -> 응답대기후 응답에 따라 처리)\
평소엔 별 문제가 없었지만 순간 많은 영상을 등록 처리해야 할때 문제가 발생하였습니다.\
이럴경우 첫번째 영상등록 API호출 -> 두번째 영상등록 API호출 -> 세번째 ··· 같이 처리되어(동기처리) 뒤로 밀린 영상들의 경우 영상등록이 너무 늦어지는 현상이 생겼습니다.\
그래서 영상 등록을 병렬적으로 처리하여 응답을 받길 원하였습니다.\
더불어 해당 비디오 서비스에서 하나의 계정에서 영상변환을 최대 3개까지만 동시에 처리하였습니다.\
즉 영상이 더 많이 올 경우를 대비해 <u>**여러 계정에 순차적으로 영상을 벙렬적으로 등록**</u>해야하였습니다.

해결방안 및 요구사항 분석 
---
핵심적인 요구사항은 다음과 같습니다.
- 영상 API호출을 병렬적으로 처리하여 응답대기시간을 줄여야한다.
  - 이부분은 멀티쓰레딩을 적용예정이었습니다.
  
- 들어오는 영상을 여러 계정에 하나씩 처리해야합니다.
  - 이부분은 


그래서 왜 멀티쓰레딩?
---

멀티쓰레딩 적용기
---


적용 후 문제
---


문제점 해결? (자가호출 회피)
---